#summary Rebuild the update site with the EclipseUpdate project
#labels Phase-Deploy

= Introduction =

We maintain the Eclipse update site for Crystal directly in the Subversion repository, in the CrystalUpdate module.  In order to deploy a new version of Crystal to the update site, the project needs to be rebuild, and the changes committed to SVN.  However, in Eclipse 3.4, there are some additional hurdles to take, which are explained below.  It's probably a good idea to bump Crystal's lowermost version number to x.y.++z with every deployment to the update site.

  * checkout the new projects CrystalFeature and EclipseUpdate
  * Update Crystal plugin. Make sure you have no local changes.
  * If desired, bump the version number of the CrystalPlugin and CrystalFeature projects.
  * Go to EclipseUpdate->site.xml. Click the "Build All" button that appears in the site.xml editor.
  * Let it do it's thang.
  * Commit EcipseUpdate, and we'll have an update site for the current version of Crystal.

= Eclipse 3.4 special =

In Eclipse 3.4, the following steps need to be followed to ensure that Crystal's update site is properly updated with a new version.

  # If desired, bump the version number of the CrystalPlugin and CrystalFeature projects.
  # If necessary, *outside eclipse* delete EclipseUpdate/artifacts.xml and content.xml (do not do it in eclipse as that causes Subclipse to mark these files as deleted in the repository)
  # EclipseUpdate->site.xml->Build All
  # In EclipseUpdate/content.xml, replace the repository name with "Crystal Static Analysis Framework".  You can do the same in artifacts.xml.
  # Commit the changes to SVN.